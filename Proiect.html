<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Access-Control-Allow-Origin" content="*" />
</head>
<body>

<style>
    body{
        margin:0px;
        background-color: #82a5ba;
    }
    canvas{
        position: absolute;
        z-index: 0;
    }

    qqq{
        color: white;
        position: absolute;
        z-index: 1;
        background-color:black;
        font-size: 20px;
        padding: 10px;
        display:none;
    }
    .mijloc{
        color: white;
        position: absolute;
        top:100px;
        z-index: 2;
        background-color:black;
        font-size: 20px;
        padding: 10px;
    }
</style>
<canvas id="c"></canvas>
<span id=output class=mijloc></span>
<qqq id="talpaD" >talpaD <input type=checkbox></qqq>
<qqq id="cap" >cap <input type=checkbox></qqq>
<qqq id="talpaS" >talpaS <input type=checkbox></qqq>
<qqq id="gambaD" >gambaD <input type=checkbox></qqq>
<qqq id="gambaS" >gambaS <input type=checkbox></qqq>
<qqq id="genunchiD" >genunchiD <input type=checkbox></qqq>
<qqq id="genunchiS" >genunchiS <input type=checkbox></qqq>
<qqq id="coapsaD" >coapsaD <input type=checkbox></qqq>
<qqq id="coapsaS" >coapsaS <input type=checkbox></qqq>
<qqq id="bazin" >bazin <input type=checkbox></qqq>
<qqq id="stomac" >stomac <input type=checkbox></qqq>
<qqq id="piept" >piept <input type=checkbox></qqq>
<qqq id="mana1D" >mana1D <input type=checkbox></qqq>
<qqq id="cotD" >cotD <input type=checkbox></qqq>
<qqq id="mana2D" >mana2D <input type=checkbox></qqq>
<qqq id="palmaD" >palmaD <input type=checkbox></qqq>
<qqq id="mana1S" >mana1S <input type=checkbox></qqq>
<qqq id="cotS" >cotS <input type=checkbox></qqq>
<qqq id="mana2S" >mana2S <input type=checkbox></qqq>
<qqq id="palmaS" >palmaS <input type=checkbox></qqq>
<qqq id="gat" >Gat<br> temperatura<input name=temperatura type=checkbox>Muci<input name=muci type=checkbox> <br><button onclick="FunctieCalculatBoala()">Submit</button></qqq>

<script>
    var boli=[{
        nume:'raceala', simptome:['temperatura','muci'], parte:['gat'], scor:0
    },
    {
        nume:'gripa', simptome:['muci','temperatura'], parte:['gat'], scor:0
    }]
    var parteselectata;
    //Functia pentru calculat boala cea mai probabila--------------------------------------------------------
    function FunctieCalculatBoala()
    {
        for(let i=0;i<boli.length;i++)
        {
            if(boli[i].parte==parteselectata)
            {
                for(let j=0;j<boli[i].simptome.length;j++)
                {
                    for (let input of document.querySelectorAll("#gat input"))
                    {
                        if(boli[i].simptome[j]==input.name && input.checked==true){
                            boli[i].scor += j;
                        }
                    }
                }
            }
            document.getElementById(boli[i].parte)
        }
        var boalacastigatoare;
        var nrmin=9007199254740991;
        for(let i=0;i<boli.length;i++)
        {
            if(boli[i].scor<nrmin)
            {
                nrmin=boli[i].scor;
                boalacastigatoare=boli[i].nume;
            }
        }
        document.getElementById("output").textContent="Boala cea mai probabila este " + boalacastigatoare;
    }
</script>

<script type="module">

    import * as THREE from 'https://threejs.org/build/three.module.js';
    import {OrbitControls} from 'https://threejs.org/examples/jsm/controls/OrbitControls.js';
    import {GUI} from 'https://threejs.org/examples/jsm/libs/lil-gui.module.min.js';
    import {OBJLoader} from 'https://threejs.org/examples/jsm/loaders/OBJLoader.js';

    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0x82a5ba);

    // Geometry + Material = Mesh ------------------------------------------------------------------------------
    let partsdata = [
        {
            w:2, h:1, d:1,
            x:-0.5, y:0, z:-1, n:'talpaD'
        },
        {
            w:2, h:1, d:1,
            x:-0.5, y:0, z:1, n:'talpaS'
        },
        {
            w:1, h:3, d:1,
            x:-1, y:2, z:-1, n:'gambaD'
        },
        {
            w:1, h:3, d:1,
            x:-1, y:2, z:1, n:'gambaS'
        },
        {
            w:1, h:1, d:1,
            x:-1, y:4, z:1, n:'genunchiS'
        },
        {
            w:1, h:1, d:1,
            x:-1, y:4, z:-1, n:'genunchiD'
        },
        {
            w:1, h:3, d:1,
            x:-1, y:6, z:-1, n:'coapsaD'
        },
        {
            w:1, h:3, d:1,
            x:-1, y:6, z:1, n:'coapsaS'
        },
        {
            w:2, h:2, d:3,
            x:-1, y:8.5, z:0, n:'bazin'
        },
        {
            w:2, h:2, d:3,
            x:-1, y:10.5, z:0, n:'stomac'
        },
        {
            w:2, h:3, d:3,
            x:-1, y:13, z:0, n:'piept'
        },
        {
            w:1, h:1, d:2,
            x:-1, y:14, z:-2.5, n:'mana1D'
        },
        {
            w:1, h:1, d:2,
            x:-1, y:14, z:2.5, n:'mana1S'
        },
        {
            w:1, h:1, d:1,
            x:-1, y:14, z:-4, n:'cotD'
        },
        {
            w:1, h:1, d:1,
            x:-1, y:14, z:4, n:'cotS'
        },
        {
            w:1, h:1, d:2,
            x:-1, y:14, z:-5.5, n:'mana2D'
        },
        {
            w:1, h:1, d:2,
            x:-1, y:14, z:5.5, n:"mana2S"
        },
        {
            w:1, h:1, d:1,
            x:-1, y:14, z:-7,n:"palmaD"
        },
        {
            w:1, h:1, d:1,
            x:-1, y:14, z:7,n:"palmaS"
        },
        {
            w:1, h:1, d:1,
            x:-1, y:15, z:0, n:'gat'
        },
        {
            w:2, h:2, d:2,
            x:-1, y:16, z:0, n:'cap'
        }
    ];
    for (let dat of partsdata){
        const material = new THREE.MeshLambertMaterial({emissive:0xe8beac,color: 0x000000});
        let geometry = new THREE.BoxGeometry(dat.w, dat.h, dat.d);
        const cube = new THREE.Mesh(geometry, material);
        cube.name=dat.n;
        scene.add(cube);
        cube.position.set(dat.x, dat.y, dat.z);
    }

    // Set up lights------------------------------------------------------------------------------------

    const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
    scene.add(ambientLight);

    const directionalLight = new THREE.DirectionalLight(0xffffff, 0.6);
    directionalLight.position.set(10, 20, 0);
    scene.add(directionalLight);

    // Camera--------------------------------------------------------------------------------------------

    const canvas = document.querySelector('#c');

    const fov = 60;
    const aspect = 2;
    const near = 0.1;
    const far = 200;
    const camera = new THREE.PerspectiveCamera(fov, aspect, near, far);
    camera.position.set(0, 0, 0);

    const controls = new OrbitControls(camera, canvas);
    controls.target.set(0, 10, 0);
    controls.update();

    camera.position.set(25, 10, 25);
    camera.lookAt(0, 10, 0);

    // Raycasting + Rendering------------------------------------------------------------------------------------------

    const renderer = new THREE.WebGLRenderer({canvas});
    renderer.setSize(window.innerWidth*0.996, window.innerHeight*0.995);
    renderer.render(scene, camera);


    function resizeRendererToDisplaySize(renderer) {
        const canvas = renderer.domElement;
        const width = canvas.clientWidth;
        const height = canvas.clientHeight;
        const needResize = canvas.width !== width || canvas.height !== height;
        if (needResize) {
        renderer.setSize(width, height, false);
        }
        return needResize;
    }

    class PickHelper {
        constructor() {
        this.raycaster = new THREE.Raycaster();
        this.pickedObject = null;
        this.pickedObjectSavedColor = 0;
        }
        pick(normalizedPosition, scene, camera, time) {
        if (this.pickedObject) {
            this.pickedObject.material.emissive.setHex(this.pickedObjectSavedColor);
            this.pickedObject = undefined;
        }

        this.raycaster.setFromCamera(normalizedPosition, camera);
        const intersectedObjects = this.raycaster.intersectObjects(scene.children);
        if (intersectedObjects.length) {
            this.pickedObject = intersectedObjects[0].object;
            this.pickedObjectSavedColor = this.pickedObject.material.emissive.getHex();
            this.pickedObject.material.emissive.setHex(0xff0000);
            for(let pp of document.querySelectorAll('qqq')) pp.style.display='none';
            let punerebloc=document.querySelector('#'+this.pickedObject.name);
            parteselectata = this.pickedObject.name;
            if(punerebloc) punerebloc.style.display='block';
        }
        }
    }

    const pickPosition = {x: 0, y: 0};
    const pickHelper = new PickHelper();
    clearPickPosition();

    function render(time) {
        time *= 0.001;

        if (resizeRendererToDisplaySize(renderer)) {
        const canvas = renderer.domElement;
        camera.aspect = canvas.clientWidth / canvas.clientHeight;
        camera.updateProjectionMatrix();
        }


        pickHelper.pick(pickPosition, scene, camera, time);

        renderer.render(scene, camera);

        requestAnimationFrame(render);
    }
    requestAnimationFrame(render);

    function getCanvasRelativePosition(event) {
        const rect = canvas.getBoundingClientRect();
        return {
        x: (event.clientX - rect.left) * canvas.width  / rect.width,
        y: (event.clientY - rect.top ) * canvas.height / rect.height,
        };
    }

    function setPickPosition(event) {
        const pos = getCanvasRelativePosition(event);
        pickPosition.x = (pos.x / canvas.width ) *  2 - 1;
        pickPosition.y = (pos.y / canvas.height) * -2 + 1
    }

    function clearPickPosition() {
        pickPosition.x = -100000;
        pickPosition.y = -100000;
    }
    window.addEventListener('click', setPickPosition);/*mousemove*/
    
</script>

</body>
</html>

